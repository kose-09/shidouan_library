<h1>ユーザー詳細</h1>

<%= image_tag @user.get_profile_image(100,100) %>
<h4>ユーザーネーム</h4>
<%= @user.name %>
<h4>自己紹介</h4>
<%= @user.introduction %>

<% if @user == current_user %>
  <%= link_to "編集", edit_user_path(@user.id) %>
  <%= link_to "退会する", confirm_withdrawal_path(@user.id) %>
<% end %>

<P><%= link_to "いいねした投稿", my_favorites_user_path(@user) %></P>

<table>
  <thead>
    <tr>
      <th>教科</th>
      <th>題材名</th>
      <th>投稿者</th>
      <th>投稿日</th>
    </tr>
  </thead>
  <tbody>
    <% @posts.each do |post| %>
    <tr>
      <td><%= post.subject_category.name %></td>
      <td>
        <%= link_to post_path(post.id) do %>
          <%= post.title %>
        <% end %>
      </td>
      <td><%= post.user.name %></td>
      <td><%= post.created_at.strftime('%Y/%m/%d') %></td>
      <td><%= post.favorites.count %>いいね</td>
      <td>
        <%= link_to post_post_comments_path(post.id) do %>
          <%= post.post_comments.count %>コメント
        <% end %>
      </td>
      <td>
        <% if post.user == current_user %>
          <%= link_to "edit", edit_post_path(post.id) %>
        <% end %>
      </td>
    </tr>
    <% end %>
  </tbody>
</table>